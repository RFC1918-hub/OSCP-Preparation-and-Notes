# Cross-Compiling Exploit Code

## mingw-64 to compile the code into a Windows PE file.

```text
i686-w64-mingw32-gcc 42341.c -o syncbreeze_exploit.exe
```

The first step is to see if the exploit code compiles without errors:

```text
kali@kali:~$ i686-w64-mingw32-gcc 42341.c -o syncbreeze_exploit.exe
/tmp:syncbreeze_exploit.c:(.text+0x2e): undefined reference to `_imp__WSAStartup@8'
/tmp:syncbreeze_exploit.c:(.text+0x3c): undefined reference to `_imp__WSAGetLastError@
/tmp:syncbreeze_exploit.c:(.text+0x80): undefined reference to `_imp__socket@12'
/tmp:syncbreeze_exploit.c:(.text+0x93): undefined reference to `_imp__WSAGetLastError@
/tmp:syncbreeze_exploit.c:(.text+0xbd): undefined reference to `_imp__inet_addr@4'
```

Something went wrong during the compilation process and although the errors from listing 429 may seem foreign, a simple Google search for “WSAStartup” reveals that this is a function found in winsock.h. Further research indicates that these errors occur when the linker can not find the winsock library, and that adding the -lws2\_32 parameter to the i686-w64-mingw32-gcc command should fix the problem:

```text
i686-w64-mingw32-gcc 42341.c -o syncbreeze_exploit.exe -lws2_32
```

